<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= product.name %> - Security App</title>
  <link rel="stylesheet" href="/css/modern-style.css">
  <style>
    .breadcrumb {
      background: #f9fafb;
      padding: 1rem 0;
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border-gray);
    }

    .breadcrumb a {
      color: var(--primary-blue);
      text-decoration: none;
      margin: 0 0.5rem;
    }

    .breadcrumb a:hover {
      text-decoration: underline;
    }

    .product-hero {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      margin-bottom: 3rem;
    }

    .product-gallery {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .main-image {
      width: 100%;
      height: 400px;
      object-fit: cover;
      border-radius: 1rem;
      background: #f9fafb;
      border: 1px solid var(--border-gray);
    }

    .product-info {
      display: flex;
      flex-direction: column;
    }

    .product-header {
      margin-bottom: 1.5rem;
    }

    .product-header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--text-dark);
    }

    .product-rating {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .stars {
      color: #fbbf24;
      font-size: 1.1rem;
    }

    .rating-count {
      color: var(--text-gray);
      font-size: 0.9rem;
    }

    .price-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      border-radius: 1rem;
      margin-bottom: 2rem;
    }

    .price-display {
      display: flex;
      align-items: baseline;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .current-price {
      font-size: 2.5rem;
      font-weight: 700;
    }

    .original-price {
      font-size: 1.2rem;
      text-decoration: line-through;
      opacity: 0.7;
    }

    .discount-badge {
      background: #ef4444;
      padding: 0.4rem 0.8rem;
      border-radius: 0.5rem;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .specs-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
      background: #f9fafb;
      padding: 1.5rem;
      border-radius: 1rem;
    }

    .spec-item {
      display: flex;
      flex-direction: column;
    }

    .spec-label {
      font-size: 0.85rem;
      color: var(--text-gray);
      margin-bottom: 0.25rem;
      font-weight: 600;
    }

    .spec-value {
      font-size: 1rem;
      color: var(--text-dark);
      font-weight: 600;
    }

    .quantity-selector {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .qty-label {
      font-weight: 600;
      color: var(--text-dark);
    }

    .qty-input {
      display: flex;
      align-items: center;
      border: 1px solid var(--border-gray);
      border-radius: 0.5rem;
      overflow: hidden;
    }

    .qty-btn {
      background: #f9fafb;
      border: none;
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      font-weight: 600;
      color: var(--primary-blue);
      transition: all var(--transition-fast);
    }

    .qty-btn:hover {
      background: var(--primary-blue);
      color: white;
    }

    .qty-display {
      width: 50px;
      text-align: center;
      border: none;
      font-size: 1rem;
      font-weight: 600;
    }

    .action-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .btn-cart {
      padding: 0.75rem 1.5rem;
      background: var(--primary-blue);
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .btn-cart:hover {
      background: #2563eb;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
    }

    .btn-wishlist {
      padding: 0.75rem 1.5rem;
      background: white;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .btn-wishlist:hover {
      background: #eff6ff;
    }

    .availability {
      padding: 1rem;
      background: #dcfce7;
      border-left: 4px solid #22c55e;
      border-radius: 0.5rem;
      margin-bottom: 2rem;
    }

    .availability.unavailable {
      background: #fee2e2;
      border-left-color: #ef4444;
    }

    .description-section {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      margin-bottom: 3rem;
      border: 1px solid var(--border-gray);
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--text-dark);
      padding-bottom: 0.75rem;
      border-bottom: 2px solid var(--primary-blue);
    }

    .description-text {
      line-height: 1.8;
      color: var(--text-gray);
      margin-bottom: 1rem;
    }

    .features-list {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }

    .features-list li {
      padding: 0.5rem 0;
      padding-left: 1.5rem;
      position: relative;
      color: var(--text-gray);
    }

    .features-list li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: var(--primary-blue);
      font-weight: 700;
    }

    .related-products {
      background: #f9fafb;
      padding: 3rem 0;
      margin-top: 3rem;
    }

    .related-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .related-card {
      background: white;
      border-radius: 0.75rem;
      overflow: hidden;
      border: 1px solid var(--border-gray);
      transition: all var(--transition-normal);
    }

    .related-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    @media (max-width: 768px) {
      .product-hero {
        grid-template-columns: 1fr;
      }

      .price-section {
        padding: 1.5rem;
      }

      .specs-grid {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        grid-template-columns: 1fr;
      }

      .main-image {
        height: 300px;
      }

      .current-price {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="container">
        <div class="logo">
          <h1>üîê Security App</h1>
        </div>
        <ul class="nav-links">
          <li><a href="/">Trang ch·ªß</a></li>
          <li><a href="/laptops" class="active">S·∫£n ph·∫©m</a></li>
          <li><a href="/about">Gi·ªõi thi·ªáu</a></li>
          <li><a href="/contact">Li√™n h·ªá</a></li>
          <% if (locals.currentUser) { %>
            <li><a href="/profile">üë§ <%= currentUser.username %></a></li>
            <% if (currentUser.role === 'admin' || currentUser.role === 'superadmin') { %>
              <li><a href="/admin">‚öôÔ∏è Admin</a></li>
            <% } %>
            <li><a href="/logout">ƒêƒÉng xu·∫•t</a></li>
          <% } else { %>
            <li><a href="/login">ƒêƒÉng nh·∫≠p</a></li>
          <% } %>
        </ul>
      </div>
    </nav>
  </header>

  <main>
    <div class="container">
      <!-- Breadcrumb -->
      <div class="breadcrumb">
        <a href="/">Trang ch·ªß</a> / <a href="/laptops">S·∫£n ph·∫©m</a> / 
        <strong><%= product.name %></strong>
      </div>

      <!-- Product Hero -->
      <div class="product-hero">
        <!-- Gallery -->
        <div class="product-gallery">
          <img src="<%= product.image %>" alt="<%= product.name %>" class="main-image">
        </div>

        <!-- Product Info -->
        <div class="product-info">
          <div class="product-header">
            <h1><%= product.name %></h1>
            <div class="product-rating">
              <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
              <div class="rating-count">(125 ƒë√°nh gi√°)</div>
            </div>
          </div>

          <!-- Price Section -->
          <div class="price-section">
            <div class="price-display">
              <div class="current-price"><%= product.price.toLocaleString('vi-VN') %>ƒë</div>
              <div class="original-price">Gi√° g·ªëc: <%= (product.price * 1.1).toLocaleString('vi-VN') %>ƒë</div>
              <div class="discount-badge">-10%</div>
            </div>
            <div style="font-size: 0.9rem; opacity: 0.9;">Gi√° ƒë√£ bao g·ªìm thu·∫ø VAT</div>
          </div>

          <!-- Specifications -->
          <div class="specs-grid">
            <div class="spec-item">
              <span class="spec-label">üñ•Ô∏è Processor (CPU)</span>
              <span class="spec-value"><%= product.specs.cpu %></span>
            </div>
            <div class="spec-item">
              <span class="spec-label">üíæ Memory (RAM)</span>
              <span class="spec-value"><%= product.specs.ram %></span>
            </div>
            <div class="spec-item">
              <span class="spec-label">üíø Storage (SSD)</span>
              <span class="spec-value"><%= product.specs.storage %></span>
            </div>
            <div class="spec-item">
              <span class="spec-label">üì∫ Display</span>
              <span class="spec-value"><%= product.specs.screen %></span>
            </div>
          </div>

          <!-- Availability -->
          <div class="availability">
            ‚úÖ <strong>C√≤n h√†ng:</strong> 15 s·∫£n ph·∫©m s·∫µn s√†ng giao h√†ng
          </div>

          <!-- Quantity Selector -->
          <div class="quantity-selector">
            <span class="qty-label">S·ªë l∆∞·ª£ng:</span>
            <div class="qty-input">
              <button class="qty-btn" onclick="decreaseQty()">‚àí</button>
              <input type="number" class="qty-display" id="quantity" value="1" min="1" max="10">
              <button class="qty-btn" onclick="increaseQty()">+</button>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button class="btn-cart" onclick="addToCart()">
              üõí Th√™m v√†o gi·ªè h√†ng
            </button>
            <button class="btn-wishlist" onclick="addToWishlist()">
              ‚ù§Ô∏è Y√™u th√≠ch
            </button>
          </div>

          <!-- Additional Info -->
          <div style="color: var(--text-gray); font-size: 0.9rem; line-height: 1.6;">
            <p>‚úì B·∫£o h√†nh ch√≠nh h√£ng 12 th√°ng</p>
            <p>‚úì Mi·ªÖn ph√≠ giao h√†ng to√†n qu·ªëc</p>
            <p>‚úì H·ªó tr·ª£ tr·∫£ g√≥p 0%</p>
            <p>‚úì ƒê·ªïi tr·∫£ mi·ªÖn ph√≠ trong 30 ng√†y</p>
          </div>
        </div>
      </div>

      <!-- Description Section -->
      <div class="description-section">
        <h2 class="section-title">üìù M√¥ t·∫£ s·∫£n ph·∫©m</h2>
        <p class="description-text">
          <%= product.description %>
        </p>
        
        <h3 style="font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem;">Nh·ªØng ∆∞u ƒëi·ªÉm n·ªïi b·∫≠t:</h3>
        <ul class="features-list">
          <li>Hi·ªáu su·∫•t m·∫°nh m·∫Ω v·ªõi b·ªô x·ª≠ l√Ω <%= product.specs.cpu %></li>
          <li>B·ªô nh·ªõ <%= product.specs.ram %> cho ƒëa nhi·ªám m∆∞·ª£t m√†</li>
          <li>·ªî c·ª©ng SSD <%= product.specs.storage %> ƒë·ªÉ l∆∞u tr·ªØ nhanh ch√≥ng</li>
          <li>M√†n h√¨nh <%= product.specs.screen %> s·∫Øc n√©t</li>
          <li>Thi·∫øt k·∫ø hi·ªán ƒë·∫°i, nh·∫π g·ªçn, d·ªÖ mang theo</li>
          <li>Tu·ªïi th·ªç pin d√†i, t·ªëi ∆∞u nƒÉng l∆∞·ª£ng</li>
        </ul>
      </div>

      <!-- Related Products -->
      <div class="related-products">
        <div class="container">
          <h2 class="section-title">üì± S·∫£n ph·∫©m li√™n quan</h2>
          <div class="related-grid">
            <% if (relatedProducts && relatedProducts.length > 0) { %>
              <% relatedProducts.forEach(related => { %>
                <div class="related-card">
                  <img src="<%= related.image %>" alt="<%= related.name %>" style="width: 100%; height: 180px; object-fit: cover;">
                  <div style="padding: 1rem;">
                    <h4 style="margin-bottom: 0.5rem; color: var(--text-dark);"><%= related.name %></h4>
                    <p style="color: var(--primary-blue); font-weight: 700; margin-bottom: 0.75rem;">
                      <%= related.price.toLocaleString('vi-VN') %>ƒë
                    </p>
                    <a href="/laptop/<%= related.id %>" style="color: var(--primary-blue); text-decoration: none; font-weight: 600;">
                      Xem chi ti·∫øt ‚Üí
                    </a>
                  </div>
                </div>
              <% }); %>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        <div>
          <h4>üîê Security App</h4>
          <p>Laptop ch·∫•t l∆∞·ª£ng cao v·ªõi gi√° c·∫°nh tranh</p>
        </div>
        <div>
          <h4>üìö Li√™n k·∫øt</h4>
          <ul style="list-style: none;">
            <li><a href="/about">Gi·ªõi thi·ªáu</a></li>
            <li><a href="/contact">Li√™n h·ªá</a></li>
            <li><a href="/laptops">S·∫£n ph·∫©m</a></li>
          </ul>
        </div>
        <div>
          <h4>üõí Mua s·∫Øm</h4>
          <ul style="list-style: none;">
            <li><a href="/cart">Gi·ªè h√†ng</a></li>
            <li><a href="/orders">ƒê∆°n h√†ng</a></li>
            <li><a href="/track">Theo d√µi</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Security App. B√°n laptop an to√†n, uy t√≠n.</p>
      </div>
    </div>
  </footer>

  <script>
    function increaseQty() {
      const input = document.getElementById('quantity');
      if (parseInt(input.value) < 10) {
        input.value = parseInt(input.value) + 1;
      }
    }

    function decreaseQty() {
      const input = document.getElementById('quantity');
      if (parseInt(input.value) > 1) {
        input.value = parseInt(input.value) - 1;
      }
    }

    function addToCart() {
      const qty = document.getElementById('quantity').value;
      alert(`‚úÖ ƒê√£ th√™m ${qty} s·∫£n ph·∫©m v√†o gi·ªè h√†ng`);
      // TODO: Implement add to cart functionality
    }

    function addToWishlist() {
      alert('‚ù§Ô∏è ƒê√£ th√™m s·∫£n ph·∫©m v√†o y√™u th√≠ch');
      // TODO: Implement wishlist functionality
    }
  </script>
</body>
</html>
